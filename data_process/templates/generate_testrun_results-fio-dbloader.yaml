testrun_results_generator:
  defaults:
    split: yes
    round: 6
    fillna: "NaN"
  columns:
    - name: CaseName
      method: batch_query_datastore
      format: "%s-%s-d%s-n%s"
      jqexpr:
        - ".iteration_data.parameters.benchmark[].rw"
        - ".iteration_data.parameters.benchmark[].bs"
        - ".iteration_data.parameters.benchmark[].iodepth"
        - ".iteration_data.parameters.benchmark[].numjobs"
    - name: Testrun
      method: query_metadata
      key: testrun-id
    - name: Type
      method: query_metadata
      key: testrun-type
    - name: Platform
      method: query_metadata
      key: testrun-platform
    - name: Branch
      method: query_metadata
      key: os-branch
    - name: Compose
      method: query_metadata
      key: os-compose
    - name: Kernel
      method: query_metadata
      key: os-kernel
    - name: Flavor
      method: query_metadata
      key: guest-flavor
    - name: Capacity
      method: query_metadata
      key: hardware-disk-capacity
    - name: Backend
      method: query_metadata
      key: hardware-disk-backend
    - name: Driver
      method: query_metadata
      key: hardware-disk-driver
    - name: Format
      method: query_metadata
      key: hardware-disk-format
    - name: CPU_Model
      method: query_metadata
      key: hypervisor-cpu_model
    - name: CPU
      method: query_metadata
      key: hypervisor-cpu
    - name: vCPU
      method: query_metadata
      key: guest-cpu
    - name: Memory
      method: query_metadata
      key: guest-memory
    - name: Tool_Version
      method: query_metadata
      key: tool-fio_version
    - name: Date
      method: query_metadata
      key: testrun-date
    - name: Comments
      method: query_metadata
      key: testrun-comments
    - name: RW
      method: query_datastore
      jqexpr: ".iteration_data.parameters.benchmark[].rw"
    - name: BS
      method: query_datastore
      jqexpr: ".iteration_data.parameters.benchmark[].bs"
    - name: IOdepth
      method: query_datastore
      jqexpr: ".iteration_data.parameters.benchmark[].iodepth"
    - name: Numjobs
      method: query_datastore
      jqexpr: ".iteration_data.parameters.benchmark[].numjobs"
    - name: Sample
      method: get_sample
    - name: IOPS
      method: query_datastore
      jqexpr: '.iteration_data.throughput.iops_sec[] | select(.client_hostname=="all") | .samples[].value'
      round: 1
    - name: LAT
      method: query_datastore
      jqexpr: '.iteration_data.latency.lat[] | select(.client_hostname=="all") | .samples[].value'
      unit: ms
      factor: 0.000001
      round: 3
    - name: CLAT
      method: query_datastore
      jqexpr: '.iteration_data.latency.clat[] | select(.client_hostname=="all") | .samples[].value'
      unit: ms
      factor: 0.000001
      round: 3
    - name: Path
      method: get_source_url
